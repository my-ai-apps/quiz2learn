
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x599037=_0x1eff;(function(_0x5c2769,_0xe5623e){const _0x12043e=_0x1eff,_0x3cd945=_0x5c2769();while(!![]){try{const _0x190eca=parseInt(_0x12043e(0x1ba))/0x1+-parseInt(_0x12043e(0x1e3))/0x2*(-parseInt(_0x12043e(0x1eb))/0x3)+-parseInt(_0x12043e(0x1f7))/0x4+parseInt(_0x12043e(0x1cd))/0x5+parseInt(_0x12043e(0x1a2))/0x6+-parseInt(_0x12043e(0x16e))/0x7+-parseInt(_0x12043e(0x193))/0x8*(parseInt(_0x12043e(0x192))/0x9);if(_0x190eca===_0xe5623e)break;else _0x3cd945['push'](_0x3cd945['shift']());}catch(_0x9f5c6c){_0x3cd945['push'](_0x3cd945['shift']());}}}(_0x1d0a,0x468c1));import{Logger}from'./common.js';const chatMessages=document[_0x599037(0x184)](_0x599037(0x23f)),messageInput=document['getElementById'](_0x599037(0x212)),sendButton=document[_0x599037(0x184)](_0x599037(0x21d)),cameraButton=document[_0x599037(0x184)](_0x599037(0x1fd)),themeToggle=document[_0x599037(0x184)](_0x599037(0x18e)),cameraContainer=document['getElementById'](_0x599037(0x1a1)),cameraPreview=document['getElementById'](_0x599037(0x188)),captureButton=document['getElementById'](_0x599037(0x1a9)),cancelButton=document[_0x599037(0x184)](_0x599037(0x15e));let stream=null,imageContext=null;function _0x1d0a(){const _0x2667bd=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','What\x20can\x20you\x20observe\x20in\x20this\x20image?','LJjjX','add','[Quiz]\x20Error\x20generating\x20quiz:','Language\x20Arts','tJIhv','ciEMJ','BDxRT','yMzFm','hrIIu','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','[Camera]\x20Error\x20processing\x20captured\x20image:','icEot','display','Option\x20D','drawImage','[UI]\x20Adding\x20quiz\x20to\x20chat:','click','imageContext:','stringify','YPQqk','options','chatMessages','[AI]\x20Creating\x20image\x20recognition\x20session...','Science','copy-button','Bot','HpeqR','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','zBMxO','window.ai\x20API\x20not\x20available','XMrck','yxVXY','General','dwDTF','ymqsU','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','Option\x20A','questions','Geography','bsEuk','[OCR]\x20Worker\x20initialized','className','onclick','\x20-\x20','WmEMR','Visual\x20content\x20detected','join','[OCR]\x20Error\x20in\x20text\x20extraction:','getTracks','bot-message','title','PwUPE','User','length','LxuZC','log','qrkXG','content','videoWidth','setAttribute','src','ezlrt','aUPmQ','DMFwO','HQLDQ','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','map','DiSAT','ROUYZ','[Quiz]\x20Generating\x20quiz...','appendChild','Generating\x20quiz...','duQll','addEventListener','What\x20is\x20the\x20significance\x20of\x20','cancelButton','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','VWAhV','loadLanguage','IAAvY','now','value','Copied!','eKUyX','trim','dark','jyBaT','[AI]\x20Performing\x20image\x20recognition...','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','General\x20Knowledge','NUTSS','403767BHTmam','error','[AI]\x20Image\x20session\x20created:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','then','initialize','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','pre','CnZXV','Processing\x20image...','getAttribute','\x0a\x0aUser\x20request:\x20','question','textContent','data-theme','ZGMVd','qShlL','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','ZfcTx','[AI]\x20Error\x20during\x20image\x20processing:','QzWYK','BjCuT','getElementById','light','diBwR','YpvFz','cameraPreview','[Chat]\x20Sending\x20message:','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','IQwzh','\x20\x20\x20','XscVY','themeToggle','terminate','[Camera]\x20Error\x20accessing\x20camera:','[Quiz]\x20Constructed\x20system\x20prompt:','9SEQNot','3096696aywfCC','prompt-suggestion','forEach','GADsH','data','[OCR]\x20Worker\x20terminated','documentElement','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','text','width','message','Create\x20a\x20quiz\x20about\x20','KiyQt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','cameraContainer','1019166ugHbHI','UsUlT','fromCharCode','tmhnw','klnDb','Art','from','captureButton','scrollHeight','clipboard','tvely','[Camera]\x20Starting\x20camera\x20initialization...','HPmxj','topics','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','Description\x20of\x20visual\x20elements','Option\x20B','\x0a\x20\x20\x20\x20','pattern','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','[AI]\x20Image\x20recognition\x20completed.\x20Result:','Mathematics','Image\x20and\x20text\x20analysis\x20complete','videoHeight','287736AWPvXr','Enter','timeLimit','agBzK','toString','qrHqr','zqPaV','message\x20bot-message','History','AzaOM','tDHbb','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','open_ended','image/jpeg','[Camera]\x20Capturing\x20image...','split','fUwzX','toDataURL','cGpfL','270665AqiGRM','Aonwv','BDQKs','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','theme','setItem','keypress','div','[OCR]\x20Text\x20extracted:','push','image','MnQCC','EDZEy','style','FSxmI','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','message\x20','xIIde','nQTUf','uGEzI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','fotaf','18UlYTTC','bPlIx','GhYFq','fKQtY','SdWXP','createElement','zhdBI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','192294NhIziv','topic','cUCtj','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','Additional\x20option\x20','HrNAm','promptStreaming','BzJdY','OoDJe','XhLOu','createImageSession','DVRBL','1419532mQJilD','GzmfL','nEyMR','filter','type','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','cameraButton','Copy\x20Quiz','message\x20bot-message\x20streaming','[OCR]\x20Text\x20extraction\x20result:','Copy\x20failed:','aXxiH','button','hNyfH','mediaDevices','yvEEE','yBaNM','what','size','stop','user-message','flex','Washington\x20Drivers\x20License\x20Test','img','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','recognize','PvPML','messageInput','QDROn','getContext','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','LBmKW','srcObject','key','confidence','oUCyO','scrollTop','quiz-container','sendButton','load','getUserMedia','EeoCc','finally','cSvxc','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','slice','qQvTu','toISOString','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.'];_0x1d0a=function(){return _0x2667bd;};return _0x1d0a();}async function startCamera(){const _0x1b0301=_0x599037,_0x43ff6e={'XMrck':_0x1b0301(0x1ad),'IQwzh':'4|1|3|0|2','BzJdY':_0x1b0301(0x20c),'SdWXP':'[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','ymqsU':'environment','zBMxO':_0x1b0301(0x190),'oUCyO':function(_0x2fec6d,_0x238b8d){return _0x2fec6d(_0x238b8d);},'ROUYZ':function(_0x3814ed,_0x30769a){return _0x3814ed+_0x30769a;},'cUCtj':'Error\x20accessing\x20camera:\x20'};console[_0x1b0301(0x261)](_0x43ff6e[_0x1b0301(0x248)]);try{const _0x366c28=_0x43ff6e[_0x1b0301(0x18b)][_0x1b0301(0x1c9)]('|');let _0x6aeb27=0x0;while(!![]){switch(_0x366c28[_0x6aeb27++]){case'0':cameraContainer[_0x1b0301(0x1da)][_0x1b0301(0x236)]=_0x43ff6e[_0x1b0301(0x1f2)];continue;case'1':console[_0x1b0301(0x261)]('[Camera]\x20Successfully\x20got\x20media\x20stream:',stream);continue;case'2':console[_0x1b0301(0x261)](_0x43ff6e[_0x1b0301(0x1e7)]);continue;case'3':cameraPreview[_0x1b0301(0x217)]=stream;continue;case'4':stream=await navigator[_0x1b0301(0x205)][_0x1b0301(0x21f)]({'video':{'facingMode':_0x43ff6e[_0x1b0301(0x24c)]}});continue;}break;}}catch(_0x1e359c){console[_0x1b0301(0x16f)](_0x43ff6e[_0x1b0301(0x246)],_0x1e359c),_0x43ff6e[_0x1b0301(0x21a)](addMessage,_0x43ff6e[_0x1b0301(0x26e)](_0x43ff6e[_0x1b0301(0x1ed)],_0x1e359c[_0x1b0301(0x19d)]));}}function stopCamera(){const _0x47f2b2=_0x599037,_0xd425a={'FSxmI':'none'};console[_0x47f2b2(0x261)]('[Camera]\x20Stopping\x20camera...'),stream&&(stream[_0x47f2b2(0x25a)]()[_0x47f2b2(0x195)](_0x2eac1a=>{const _0x247953=_0x47f2b2;console[_0x247953(0x261)]('[Camera]\x20Stopping\x20track:',_0x2eac1a['label']),_0x2eac1a[_0x247953(0x20a)]();}),stream=null),cameraContainer[_0x47f2b2(0x1da)]['display']=_0xd425a[_0x47f2b2(0x1db)],console['log']('[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden');}async function processImageUsingWindowAI(_0x25df91){const _0x156001=_0x599037,_0x4b5123={'ZGMVd':'[AI]\x20Starting\x20image\x20processing...','URgIP':_0x156001(0x1dc),'QDROn':'Windows\x20AI\x20API\x20not\x20available','oeQbP':_0x156001(0x240),'tJIhv':_0x156001(0x170),'agBzK':_0x156001(0x16a),'uObaX':_0x156001(0x1b6),'oRuVc':_0x156001(0x181)};console['log'](_0x4b5123[_0x156001(0x17d)],_0x25df91);if(!window['ai']){console[_0x156001(0x16f)](_0x4b5123['URgIP']);throw new Error(_0x4b5123[_0x156001(0x213)]);}try{console[_0x156001(0x261)](_0x4b5123['oeQbP']);const _0x5c7032=await window['ai'][_0x156001(0x1f5)]();console[_0x156001(0x261)](_0x4b5123[_0x156001(0x22e)],_0x5c7032),console['log'](_0x4b5123[_0x156001(0x1bd)]);const _0x659733=await _0x5c7032['recognize'](_0x25df91);return console[_0x156001(0x261)](_0x4b5123['uObaX'],_0x659733),_0x659733;}catch(_0x167ad7){console[_0x156001(0x16f)](_0x4b5123['oRuVc'],_0x167ad7);throw _0x167ad7;}}async function processImageUsingTesseract(_0x25b313){const _0x4857a5=_0x599037,_0x3f4e81={'cSvxc':_0x4857a5(0x174),'klnDb':function(_0x423b2f,_0x58263e,_0x2c7d5f){return _0x423b2f(_0x58263e,_0x2c7d5f);},'YPQqk':_0x4857a5(0x177),'yuNzj':function(_0x308082,_0x5011c1){return _0x308082(_0x5011c1);},'duQll':_0x4857a5(0x200),'xOjUB':function(_0x547bea,_0x4aca9b){return _0x547bea>_0x4aca9b;},'uGEzI':_0x4857a5(0x19b),'qrHqr':_0x4857a5(0x20d),'EDZEy':function(_0x3b0c1f,_0x2abbd2){return _0x3b0c1f(_0x2abbd2);},'xcvcK':'[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','zqPaV':_0x4857a5(0x1d7),'buAGp':_0x4857a5(0x257),'diBwR':'Visual\x20Analysis','GzmfL':'General\x20Knowledge','xmrwY':'[Processing]\x20Error\x20during\x20image\x20processing:'};console[_0x4857a5(0x261)](_0x3f4e81[_0x4857a5(0x222)]),_0x3f4e81[_0x4857a5(0x1a6)](addMessage,_0x3f4e81[_0x4857a5(0x23d)],![]);try{const _0x42a7f8=await _0x3f4e81['yuNzj'](extractTextFromImage,_0x25b313);return console[_0x4857a5(0x261)](_0x3f4e81[_0x4857a5(0x272)],_0x42a7f8),_0x42a7f8[_0x4857a5(0x19b)]&&_0x3f4e81['xOjUB'](_0x42a7f8[_0x4857a5(0x19b)][_0x4857a5(0x167)]()[_0x4857a5(0x25f)],0x0)?{'type':_0x3f4e81[_0x4857a5(0x1e0)],'content':_0x3f4e81[_0x4857a5(0x1bf)],'confidence':_0x42a7f8['confidence'],'topics':_0x3f4e81[_0x4857a5(0x1d9)](generateTopics,_0x42a7f8['text'])}:(console[_0x4857a5(0x261)](_0x3f4e81['xcvcK']),{'type':_0x3f4e81[_0x4857a5(0x1c0)],'content':_0x3f4e81['buAGp'],'topics':[_0x3f4e81[_0x4857a5(0x186)],_0x3f4e81[_0x4857a5(0x1f8)]],'features':{'timestamp':new Date()[_0x4857a5(0x226)](),'dimensions':{'width':_0x25b313[_0x4857a5(0x19c)],'height':_0x25b313['height']}}});}catch(_0x323161){console['error'](_0x3f4e81['xmrwY'],_0x323161);throw _0x323161;}}async function extractTextFromImage(_0x50e47a){const _0xf157d4=_0x599037,_0x5720bb={'oSmyi':'[OCR]\x20Starting\x20text\x20extraction...','UsUlT':'eng','nEyMR':_0xf157d4(0x1d5),'icEot':function(_0x16c91c,_0x124f5f){return _0x16c91c(_0x124f5f);},'Jqohk':_0xf157d4(0x1b8),'cGpfL':_0xf157d4(0x259)};console[_0xf157d4(0x261)](_0x5720bb['oSmyi']);const _0x24d877=_0x5720bb[_0xf157d4(0x1a3)];try{const _0x4a0b95=await Tesseract['createWorker']();await _0x4a0b95[_0xf157d4(0x21e)](),await _0x4a0b95[_0xf157d4(0x161)](_0x24d877),await _0x4a0b95[_0xf157d4(0x173)](_0x24d877),console['log'](_0xf157d4(0x252));const _0x14c4da=await _0x4a0b95[_0xf157d4(0x210)](_0x50e47a);console[_0xf157d4(0x261)](_0x5720bb[_0xf157d4(0x1f9)],_0x14c4da[_0xf157d4(0x197)][_0xf157d4(0x19b)]),await _0x4a0b95[_0xf157d4(0x18f)](),console[_0xf157d4(0x261)](_0xf157d4(0x198));const _0x4b95c1={'timestamp':new Date()[_0xf157d4(0x226)](),'imageSize':{'width':_0x50e47a[_0xf157d4(0x19c)],'height':_0x50e47a['height']},'extractedText':_0x14c4da[_0xf157d4(0x197)]['text'],'confidenceScore':_0x14c4da[_0xf157d4(0x197)][_0xf157d4(0x219)],'suggestedTopics':_0x5720bb[_0xf157d4(0x235)](generateTopics,_0x14c4da[_0xf157d4(0x197)][_0xf157d4(0x19b)])};return{'description':_0x5720bb['Jqohk'],'metadata':_0x4b95c1,'text':_0x14c4da[_0xf157d4(0x197)]['text'],'confidence':_0x14c4da['data']['confidence']};}catch(_0x1a5ac5){return console[_0xf157d4(0x16f)](_0x5720bb[_0xf157d4(0x1cc)],_0x1a5ac5),{'text':'','confidence':0x0};}}function generateTopics(_0x3ece85){const _0x5b4695=_0x599037,_0x549f56={'eKUyX':_0x5b4695(0x1b7),'XCVYK':_0x5b4695(0x241),'tDHbb':_0x5b4695(0x1c2),'ezlrt':_0x5b4695(0x250),'CnZXV':_0x5b4695(0x22d),'ZfcTx':_0x5b4695(0x1a7),'GADsH':_0x5b4695(0x16c)},_0x37d84c=new Set(),_0x2e18ce=_0x3ece85['toLowerCase'](),_0x2d9716=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x549f56[_0x5b4695(0x166)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x549f56['XCVYK']},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x549f56[_0x5b4695(0x1c4)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x549f56[_0x5b4695(0x267)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x549f56[_0x5b4695(0x176)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x549f56[_0x5b4695(0x180)]}];return _0x2d9716[_0x5b4695(0x195)](_0x3712de=>{const _0x311670=_0x5b4695;_0x3712de[_0x311670(0x1b4)]['test'](_0x2e18ce)&&_0x37d84c[_0x311670(0x22b)](_0x3712de['topic']);}),_0x37d84c[_0x5b4695(0x209)]===0x0&&_0x37d84c[_0x5b4695(0x22b)](_0x549f56[_0x5b4695(0x196)]),Array[_0x5b4695(0x1a8)](_0x37d84c);}async function generateQuizUsingAI(_0x2ca53a,_0xdd685d){const _0x5747c1=_0x599037,_0xc61c47={'WmEMR':_0x5747c1(0x19a),'BDQKs':_0x5747c1(0x247),'NUTSS':_0x5747c1(0x191),'SrRUI':'system','IAAvY':'user','yBaNM':_0x5747c1(0x1d4),'LJjjX':function(_0x28271d,_0x714617,_0x436ea9){return _0x28271d(_0x714617,_0x436ea9);},'fUwzX':function(_0x5d990f){return _0x5d990f();},'tvely':function(_0x57c1f9,_0x41b260,_0x3b11af){return _0x57c1f9(_0x41b260,_0x3b11af);},'FegsE':_0x5747c1(0x1fc),'BjCuT':function(_0x4e3b8d,_0x1598ce){return _0x4e3b8d(_0x1598ce);},'qQvTu':_0x5747c1(0x17f),'PwUPE':function(_0x3de14f){return _0x3de14f();},'aUPmQ':_0x5747c1(0x1b0),'twXlF':_0x5747c1(0x233),'xIIde':function(_0x20f0ca,_0x294f09,_0x7bec93){return _0x20f0ca(_0x294f09,_0x7bec93);},'xaXrP':_0x5747c1(0x1d0),'tmhnw':'Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.'};console[_0x5747c1(0x261)](_0xc61c47[_0x5747c1(0x256)],{'imageContext':_0x2ca53a,'userPrompt':_0xdd685d});try{console[_0x5747c1(0x261)](_0x5747c1(0x23b),JSON[_0x5747c1(0x23c)](_0x2ca53a));if(!window['ai'])throw new Error(_0xc61c47[_0x5747c1(0x1cf)]);const _0x5020ac=_0x5747c1(0x26b)+JSON['stringify'](_0x2ca53a)+_0x5747c1(0x245);console[_0x5747c1(0x261)](_0xc61c47[_0x5747c1(0x16d)],_0x5020ac);const _0x114c55=[{'role':_0xc61c47['SrRUI'],'content':_0x5020ac},{'role':_0xc61c47[_0x5747c1(0x162)],'content':_0xdd685d}],_0x19f3f2=document[_0x5747c1(0x1e8)](_0xc61c47[_0x5747c1(0x207)]);_0x19f3f2[_0x5747c1(0x253)]=_0x5747c1(0x1ff),chatMessages[_0x5747c1(0x270)](_0x19f3f2),_0xc61c47['LJjjX'](showTypingIndicator,chatMessages,_0x5747c1(0x271));if(!aiLanguageSession)await _0xc61c47[_0x5747c1(0x1ca)](initializeLanguageSession);const _0x5ce1db=await aiLanguageSession[_0x5747c1(0x1f1)](_0x5020ac+_0x5747c1(0x179)+_0xdd685d);let _0x53b5bb='';for await(const _0xceb2e2 of _0x5ce1db){_0x53b5bb+=_0xceb2e2,_0x19f3f2[_0x5747c1(0x17b)]=_0x53b5bb,chatMessages[_0x5747c1(0x21b)]=chatMessages[_0x5747c1(0x1aa)];}_0x19f3f2['remove']();let _0x11b0e8;try{_0x11b0e8=safeJSONParse(_0x53b5bb),_0xc61c47[_0x5747c1(0x1ac)](addMessage,_0xc61c47['FegsE'],![]),_0xc61c47[_0x5747c1(0x183)](addQuiz,_0x11b0e8);}catch(_0x283a76){console['error'](_0xc61c47[_0x5747c1(0x225)],_0x283a76),_0xc61c47[_0x5747c1(0x22a)](addMessage,_0x53b5bb,![]);throw _0x283a76;}_0xc61c47[_0x5747c1(0x25d)](removeTypingIndicator);}catch(_0x459e4a){console[_0x5747c1(0x16f)](_0xc61c47[_0x5747c1(0x268)],_0x459e4a),removeTypingIndicator(),addMessage(_0xc61c47['twXlF'],![]);try{const _0x35e3d5=await _0xc61c47[_0x5747c1(0x1ac)](generateQuizWithoutAI,_0x2ca53a,_0xdd685d);_0xc61c47['xIIde'](addMessage,_0x5747c1(0x16b),![]),addQuiz(_0x35e3d5);}catch(_0x12179b){console[_0x5747c1(0x16f)](_0xc61c47['xaXrP'],_0x12179b),_0xc61c47[_0x5747c1(0x1de)](addMessage,_0xc61c47[_0x5747c1(0x1a5)],![]);}}}function generateOptionsFromText(_0x4d9bc0){const _0x97db36=_0x599037,_0x4ea041={'hrIIu':function(_0x25a7c5,_0x33be5c){return _0x25a7c5<_0x33be5c;},'Aonwv':function(_0x26428e,_0x40d73b){return _0x26428e+_0x40d73b;},'HrNAm':_0x97db36(0x1ef)},_0x4ca049=_0x4d9bc0['split'](/[.!?]+/)[_0x97db36(0x1fa)](_0x24705b=>_0x24705b[_0x97db36(0x167)]()[_0x97db36(0x25f)]>0x0),_0x273725=_0x4ca049['slice'](0x0,0x4)[_0x97db36(0x26c)](_0x2e23c1=>_0x2e23c1[_0x97db36(0x167)]());while(_0x4ea041[_0x97db36(0x232)](_0x273725[_0x97db36(0x25f)],0x4)){_0x273725[_0x97db36(0x1d6)](_0x4ea041[_0x97db36(0x1ce)](_0x4ea041[_0x97db36(0x1f0)],_0x4ea041[_0x97db36(0x1ce)](_0x273725['length'],0x1)));}return _0x273725;}function generateCustomQuestion(_0x3f5f84,_0x42b7c2){const _0x11d205=_0x599037,_0x1f29af={'GhYFq':_0x11d205(0x208)};return _0x3f5f84['toLowerCase']()['includes'](_0x1f29af[_0x11d205(0x1e5)])?_0x3f5f84:_0x11d205(0x15d)+_0x42b7c2[_0x11d205(0x1c9)]('\x20')[_0x11d205(0x224)](0x0,0x3)['join']('\x20')+'...?';}function addMessage(_0x5cc47b,_0xa92e77=![]){const _0x5999da=_0x599037,_0x1405d8={'ZVJKj':_0x5999da(0x25e),'bqhID':_0x5999da(0x243),'nQTUf':_0x5999da(0x20b)};console[_0x5999da(0x261)]('[UI]\x20Adding\x20message:\x20'+(_0xa92e77?_0x1405d8['ZVJKj']:_0x1405d8['bqhID'])+':',_0x5cc47b);const _0xf16d2=document['createElement'](_0x5999da(0x1d4));_0xf16d2[_0x5999da(0x253)]=_0x5999da(0x1dd)+(_0xa92e77?_0x1405d8[_0x5999da(0x1df)]:_0x5999da(0x25b)),_0xf16d2[_0x5999da(0x17b)]=_0x5cc47b,chatMessages[_0x5999da(0x270)](_0xf16d2),chatMessages[_0x5999da(0x21b)]=chatMessages[_0x5999da(0x1aa)];}function addQuiz(_0x1a2d46){const _0xa9e810=_0x599037,_0x292601={'XhLOu':'div','zhdBI':_0xa9e810(0x175),'hNyfH':_0xa9e810(0x203),'BDxRT':_0xa9e810(0x242),'yvEEE':_0xa9e810(0x1fe)};console['log'](_0xa9e810(0x239),_0x1a2d46);const _0x15ec73=document['createElement'](_0x292601[_0xa9e810(0x1f4)]);_0x15ec73[_0xa9e810(0x253)]=_0xa9e810(0x21c);const _0x3bd4f7=_0xa9e810(0x1ea)+_0x1a2d46[_0xa9e810(0x25c)]+_0xa9e810(0x1a0)+_0x1a2d46['grade']+_0xa9e810(0x228)+_0x1a2d46['subject']+_0xa9e810(0x1e1)+_0x1a2d46[_0xa9e810(0x1bc)]+_0xa9e810(0x215)+_0x1a2d46[_0xa9e810(0x1ec)]+_0xa9e810(0x223)+_0x1a2d46[_0xa9e810(0x24f)][_0xa9e810(0x26c)]((_0x48809b,_0x37e61c)=>_0xa9e810(0x1c5)+(_0x37e61c+0x1)+'.\x20'+_0x48809b[_0xa9e810(0x17a)]+_0xa9e810(0x1c5)+(_0x48809b[_0xa9e810(0x23e)]?_0x48809b[_0xa9e810(0x23e)][_0xa9e810(0x26c)]((_0x93abb7,_0x46236b)=>_0xa9e810(0x18c)+String[_0xa9e810(0x1a4)](0x61+_0x46236b)+')\x20'+_0x93abb7)['join']('\x0a'):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20'+_0x48809b[_0xa9e810(0x1fb)]+_0xa9e810(0x171)+_0x48809b['points']+_0xa9e810(0x1c5))[_0xa9e810(0x258)]('\x0a')+_0xa9e810(0x1b3),_0x8d902d=document[_0xa9e810(0x1e8)](_0x292601[_0xa9e810(0x1e9)]);_0x8d902d[_0xa9e810(0x17b)]=_0x3bd4f7,_0x15ec73[_0xa9e810(0x270)](_0x8d902d);const _0xd7adef=document['createElement'](_0x292601[_0xa9e810(0x204)]);_0xd7adef[_0xa9e810(0x253)]=_0x292601[_0xa9e810(0x230)],_0xd7adef[_0xa9e810(0x17b)]=_0x292601[_0xa9e810(0x206)],_0xd7adef[_0xa9e810(0x254)]=()=>{const _0x1212c4=_0xa9e810;navigator[_0x1212c4(0x1ab)]['writeText'](_0x3bd4f7)[_0x1212c4(0x172)](()=>_0xd7adef['textContent']=_0x1212c4(0x165))['catch'](_0x11ee86=>console[_0x1212c4(0x16f)](_0x1212c4(0x201),_0x11ee86))[_0x1212c4(0x221)](()=>setTimeout(()=>_0xd7adef[_0x1212c4(0x17b)]='Copy\x20Quiz',0x7d0));},_0x15ec73[_0xa9e810(0x270)](_0xd7adef),chatMessages[_0xa9e810(0x270)](_0x15ec73),chatMessages['scrollTop']=chatMessages[_0xa9e810(0x1aa)];}async function captureImage(){const _0x363a1e=_0x599037,_0x1a6917={'LxuZC':function(_0x48b182){return _0x48b182();},'qrkXG':_0x363a1e(0x1d4),'ddCgY':_0x363a1e(0x194),'LBmKW':_0x363a1e(0x1c8),'elJPe':'canvas','pVgCg':_0x363a1e(0x20e),'yxVXY':_0x363a1e(0x1c7),'dwDTF':'captured-image','bsEuk':_0x363a1e(0x1c1),'HPmxj':function(_0x4860a5,_0x2cf5c5,_0x44c73e){return _0x4860a5(_0x2cf5c5,_0x44c73e);},'proEk':_0x363a1e(0x24d),'TkeIk':function(_0xf89913,_0xc461a1){return _0xf89913===_0xc461a1;},'aXxiH':_0x363a1e(0x19b),'AzaOM':'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','DiSAT':_0x363a1e(0x234),'tXgit':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console[_0x363a1e(0x261)](_0x1a6917[_0x363a1e(0x216)]);try{const _0x437750=document[_0x363a1e(0x1e8)](_0x1a6917['elJPe']);_0x437750[_0x363a1e(0x19c)]=cameraPreview[_0x363a1e(0x264)],_0x437750['height']=cameraPreview[_0x363a1e(0x1b9)],_0x437750[_0x363a1e(0x214)]('2d')[_0x363a1e(0x238)](cameraPreview,0x0,0x0);const _0x6133e9=document['createElement'](_0x1a6917['pVgCg']);_0x6133e9[_0x363a1e(0x266)]=_0x437750[_0x363a1e(0x1cb)](_0x1a6917[_0x363a1e(0x249)]),_0x6133e9[_0x363a1e(0x253)]=_0x1a6917[_0x363a1e(0x24b)];const _0x1c72a5=document[_0x363a1e(0x1e8)](_0x1a6917['qrkXG']);_0x1c72a5[_0x363a1e(0x253)]=_0x1a6917[_0x363a1e(0x251)],_0x1c72a5[_0x363a1e(0x270)](_0x6133e9),chatMessages[_0x363a1e(0x270)](_0x1c72a5),_0x1a6917[_0x363a1e(0x260)](stopCamera);const _0x495370=await processImageUsingTesseract(_0x6133e9);imageContext=_0x495370,console[_0x363a1e(0x261)]('[Processing]\x20Image\x20processing\x20completed:',JSON[_0x363a1e(0x23c)](imageContext,null,0x2)),_0x1a6917[_0x363a1e(0x1ae)](addMessage,_0x1a6917['proEk'],![]);const _0x273bae=[_0x363a1e(0x19e)+imageContext['topics'][0x0]+_0x363a1e(0x255)+imageContext[_0x363a1e(0x263)],_0x1a6917['TkeIk'](imageContext[_0x363a1e(0x1fb)],_0x1a6917[_0x363a1e(0x202)])?_0x363a1e(0x1ee)+imageContext[_0x363a1e(0x263)]:_0x1a6917[_0x363a1e(0x1c3)],'Make\x20a\x20quiz\x20suitable\x20for\x20beginners'];_0x273bae[_0x363a1e(0x195)](_0x4fd55b=>{const _0xf57210=_0x363a1e,_0x350c35={'lEmDZ':function(_0x5836ce){return _0x1a6917['LxuZC'](_0x5836ce);}},_0x5967ab=document[_0xf57210(0x1e8)](_0x1a6917[_0xf57210(0x262)]);_0x5967ab[_0xf57210(0x253)]=_0x1a6917['ddCgY'],_0x5967ab[_0xf57210(0x17b)]=_0x4fd55b,_0x5967ab['onclick']=()=>{messageInput['value']=_0x4fd55b,_0x350c35['lEmDZ'](sendMessage);},chatMessages[_0xf57210(0x270)](_0x5967ab);});}catch(_0x687d52){console[_0x363a1e(0x16f)](_0x1a6917[_0x363a1e(0x26d)],_0x687d52),addMessage(_0x1a6917['tXgit'],![]);}}function _0x1eff(_0x10951c,_0x155918){const _0x1d0ab4=_0x1d0a();return _0x1eff=function(_0x1eff83,_0x26e8c6){_0x1eff83=_0x1eff83-0x15d;let _0x7157bc=_0x1d0ab4[_0x1eff83];return _0x7157bc;},_0x1eff(_0x10951c,_0x155918);}async function sendMessage(){const _0x11aaba=_0x599037,_0x218548={'fotaf':_0x11aaba(0x189),'QzWYK':function(_0x195bd7,_0x3a9140,_0x26ed4c){return _0x195bd7(_0x3a9140,_0x26ed4c);},'QgnhG':function(_0x44ce20,_0x469f43){return _0x44ce20(_0x469f43);},'DMFwO':_0x11aaba(0x227),'HQLDQ':function(_0x317a3f,_0x2abac0,_0x13d1c6){return _0x317a3f(_0x2abac0,_0x13d1c6);}},_0x51e991=messageInput[_0x11aaba(0x164)][_0x11aaba(0x167)]();if(!_0x51e991)return;console[_0x11aaba(0x261)](_0x218548[_0x11aaba(0x1e2)],_0x51e991),_0x218548[_0x11aaba(0x182)](addMessage,_0x51e991,!![]),messageInput[_0x11aaba(0x164)]='';if(imageContext)try{const _0x2a0c2d=await generateQuizUsingAI(imageContext,_0x51e991);addMessage(_0x11aaba(0x20f),![]),_0x218548['QgnhG'](addQuiz,_0x2a0c2d);}catch(_0x402e39){_0x218548['QzWYK'](addMessage,_0x218548[_0x11aaba(0x269)],![]);}else _0x218548[_0x11aaba(0x26a)](addMessage,'Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.',![]);}function toggleTheme(){const _0x41831b=_0x599037,_0x47aa40={'GPgKc':_0x41831b(0x17c),'qShlL':function(_0xf7a983,_0x4bd32f){return _0xf7a983===_0x4bd32f;},'DVRBL':_0x41831b(0x168),'MnQCC':_0x41831b(0x185),'PvPML':_0x41831b(0x1d1)},_0x59b8ea=document[_0x41831b(0x199)],_0x54001a=_0x59b8ea[_0x41831b(0x178)](_0x47aa40['GPgKc']),_0x389751=_0x47aa40[_0x41831b(0x17e)](_0x54001a,_0x47aa40[_0x41831b(0x1f6)])?_0x47aa40[_0x41831b(0x1d8)]:_0x47aa40[_0x41831b(0x1f6)];_0x59b8ea[_0x41831b(0x265)](_0x41831b(0x17c),_0x389751),localStorage[_0x41831b(0x1d2)](_0x47aa40[_0x41831b(0x211)],_0x389751);}themeToggle[_0x599037(0x273)](_0x599037(0x23a),toggleTheme),cameraButton['addEventListener'](_0x599037(0x23a),startCamera),captureButton[_0x599037(0x273)](_0x599037(0x23a),captureImage),cancelButton[_0x599037(0x273)](_0x599037(0x23a),stopCamera),sendButton[_0x599037(0x273)](_0x599037(0x23a),sendMessage),messageInput[_0x599037(0x273)](_0x599037(0x1d3),_0x47de73=>{const _0x51c8ec=_0x599037,_0x129a55={'AtZKP':function(_0x16f2c2,_0xcac53f){return _0x16f2c2===_0xcac53f;},'KiyQt':_0x51c8ec(0x1bb),'EeoCc':function(_0x3a6513){return _0x3a6513();}};if(_0x129a55['AtZKP'](_0x47de73[_0x51c8ec(0x218)],_0x129a55[_0x51c8ec(0x19f)]))_0x129a55[_0x51c8ec(0x220)](sendMessage);});async function generateQuizWithoutAI(_0x3c9949,_0x494af7){const _0x2bce09=_0x599037,_0x40c2a5={'XscVY':_0x2bce09(0x26f),'HpeqR':function(_0x226cdb,_0x4552e9){return _0x226cdb===_0x4552e9;},'fIYNX':_0x2bce09(0x19b),'jyBaT':_0x2bce09(0x1b5),'HVGaP':'multiple_choice','fKQtY':'Option\x20A','YpvFz':_0x2bce09(0x18a),'bPlIx':'open_ended','yMzFm':_0x2bce09(0x229),'jyXsz':function(_0x5216cb,_0x55fc87,_0x3953c8){return _0x5216cb(_0x55fc87,_0x3953c8);},'OoDJe':_0x2bce09(0x1b2),'uEaBx':'Option\x20C','VWAhV':_0x2bce09(0x237),'ciEMJ':_0x2bce09(0x24a)};console[_0x2bce09(0x261)](_0x40c2a5[_0x2bce09(0x18d)],{'imageContext':_0x3c9949,'userPrompt':_0x494af7});try{const _0x501b97=_0x40c2a5[_0x2bce09(0x244)](_0x3c9949[_0x2bce09(0x1fb)],_0x40c2a5['fIYNX']),_0x4bd928=_0x3c9949[_0x2bce09(0x263)],_0xc213b0=_0x3c9949[_0x2bce09(0x1af)],_0x53e41d=[];_0x501b97?(_0x53e41d[_0x2bce09(0x1d6)]({'question':_0x40c2a5[_0x2bce09(0x169)],'type':_0x40c2a5['HVGaP'],'options':generateOptionsFromText(_0x4bd928),'answer':_0x40c2a5[_0x2bce09(0x1e6)],'points':0x2}),_0x53e41d[_0x2bce09(0x1d6)]({'question':_0x40c2a5[_0x2bce09(0x187)],'type':_0x40c2a5[_0x2bce09(0x1e4)],'answer':_0x2bce09(0x15f),'points':0x2})):_0x53e41d[_0x2bce09(0x1d6)]({'question':_0x40c2a5[_0x2bce09(0x231)],'type':_0x2bce09(0x1c6),'answer':_0x2bce09(0x1b1),'points':0x2});_0x53e41d['push']({'question':_0x40c2a5['jyXsz'](generateCustomQuestion,_0x494af7,_0x4bd928),'type':_0x40c2a5['HVGaP'],'options':[_0x2bce09(0x24e),_0x40c2a5[_0x2bce09(0x1f3)],_0x40c2a5['uEaBx'],_0x40c2a5[_0x2bce09(0x160)]],'answer':_0x2bce09(0x24e),'points':0x2});const _0x4fa8ff={'id':Date[_0x2bce09(0x163)]()[_0x2bce09(0x1be)](),'title':_0xc213b0[0x0]+'\x20Quiz','subject':_0xc213b0[0x0],'grade':_0x40c2a5[_0x2bce09(0x22f)],'timeLimit':0xf,'topic':_0xc213b0[_0x2bce09(0x258)](',\x20'),'questions':_0x53e41d};return _0x4fa8ff;}catch(_0x218d6a){console['error'](_0x2bce09(0x22c),_0x218d6a);throw _0x218d6a;}}