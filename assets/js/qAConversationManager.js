
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
function _0x378e(){const _0x43ff23=['slice','376FVzffT','some','find','5819496ONvDdz','wEmpM','8433JZVVRe','Error\x20loading\x20conversations:','getItem','3|0|2|1|4','hCMuW','15380IxGHUZ','ghQRo','createNewConversation','egYPM','title','zSXdq','FKQEh','4112988wIPzWI','Error\x20saving\x20conversations:','toISOString','join','loadConversations','currentConversationId','jYtsW','12698160TqjSlX','error','parse','MAX_STORAGE_SIZE','setItem','New\x20Conversation','1QSdsoT','...','messages','localeCompare','14iCWkth','split','MAX_CONVERSATIONS','ulOEZ','getSortedConversations','mUMIX','oJQuv','16701421letolK','lVgWL','map','88285OVigIS','DWsJY','getCurrentConversation','WQsTc','0|1|2|4|3','deleteConversation','push','1103434pULvxg','sort','length','updatedAt','now','conversations','12CfBQhY'];_0x378e=function(){return _0x43ff23;};return _0x378e();}const _0x3e0ab4=_0x128c;(function(_0x6f1eff,_0x48b824){const _0xfd01ba=_0x128c,_0x13dc15=_0x6f1eff();while(!![]){try{const _0x5aa87b=parseInt(_0xfd01ba(0xda))/0x1*(parseInt(_0xfd01ba(0xb4))/0x2)+-parseInt(_0xfd01ba(0xcd))/0x3+parseInt(_0xfd01ba(0xbc))/0x4*(-parseInt(_0xfd01ba(0xad))/0x5)+-parseInt(_0xfd01ba(0xbf))/0x6*(-parseInt(_0xfd01ba(0xde))/0x7)+parseInt(_0xfd01ba(0xd4))/0x8+-parseInt(_0xfd01ba(0xc1))/0x9*(-parseInt(_0xfd01ba(0xc6))/0xa)+-parseInt(_0xfd01ba(0xaa))/0xb*(parseInt(_0xfd01ba(0xba))/0xc);if(_0x5aa87b===_0x48b824)break;else _0x13dc15['push'](_0x13dc15['shift']());}catch(_0x394c6e){_0x13dc15['push'](_0x13dc15['shift']());}}}(_0x378e,0xed06c));import{Logger}from'./common.js';class Conversation{constructor(_0x1def62,_0x20db9e){const _0x504a70=_0x128c,_0x3005ff={'mUMIX':_0x504a70(0xc4)},_0x32679f=_0x3005ff[_0x504a70(0xa8)][_0x504a70(0xdf)]('|');let _0x29f222=0x0;while(!![]){switch(_0x32679f[_0x29f222++]){case'0':this['title']=_0x20db9e;continue;case'1':this['createdAt']=new Date()['toISOString']();continue;case'2':this[_0x504a70(0xdc)]=[];continue;case'3':this['id']=_0x1def62;continue;case'4':this[_0x504a70(0xb7)]=new Date()[_0x504a70(0xcf)]();continue;}break;}}}function _0x128c(_0x2e1c7d,_0x29342d){const _0x378eda=_0x378e();return _0x128c=function(_0x128c13,_0x12ce75){_0x128c13=_0x128c13-0xa6;let _0x2afe63=_0x378eda[_0x128c13];return _0x2afe63;},_0x128c(_0x2e1c7d,_0x29342d);}class qAConversationManager{constructor(){const _0x471147=_0x128c,_0x453932={'oJQuv':function(_0x516f94,_0x4506c5){return _0x516f94*_0x4506c5;}},_0x31e709=_0x471147(0xb1)[_0x471147(0xdf)]('|');let _0x1480fc=0x0;while(!![]){switch(_0x31e709[_0x1480fc++]){case'0':this[_0x471147(0xb9)]=[];continue;case'1':this[_0x471147(0xd2)]=null;continue;case'2':this[_0x471147(0xd7)]=_0x453932[_0x471147(0xa9)](_0x453932[_0x471147(0xa9)](4.5,0x400),0x400);continue;case'3':this['loadConversations']();continue;case'4':this[_0x471147(0xe0)]=0x32;continue;}break;}}[_0x3e0ab4(0xc8)](){const _0x1fa1e3=_0x3e0ab4,_0x458831={'lVgWL':function(_0x52af88,_0x1a2096){return _0x52af88+_0x1a2096;},'jYtsW':'conv_','hCMuW':_0x1fa1e3(0xd9)},_0x499b88=_0x458831[_0x1fa1e3(0xab)](_0x458831[_0x1fa1e3(0xd3)],Date[_0x1fa1e3(0xb8)]()),_0x503f3f=new Conversation(_0x499b88,_0x458831[_0x1fa1e3(0xc5)]);return this['conversations'][_0x1fa1e3(0xb3)](_0x503f3f),this['currentConversationId']=_0x499b88,_0x503f3f;}[_0x3e0ab4(0xaf)](){const _0x213bf6=_0x3e0ab4;return this[_0x213bf6(0xb9)][_0x213bf6(0xbe)](_0x5181f=>_0x5181f['id']===this[_0x213bf6(0xd2)])||this[_0x213bf6(0xc8)]();}['addMessage'](_0x5d69e7,_0xdf924a){const _0x364c98=_0x3e0ab4,_0x2715bf={'tbPzP':function(_0x1ad48e,_0x577319){return _0x1ad48e===_0x577319;},'ZpTZe':'user','ulOEZ':function(_0x594baf,_0xb38ae2){return _0x594baf===_0xb38ae2;},'zSXdq':_0x364c98(0xd9),'wEmpM':function(_0x2d0212,_0x238cc5){return _0x2d0212+_0x238cc5;}},_0x5eb9aa=this['getCurrentConversation']();_0x5eb9aa&&(_0x5eb9aa[_0x364c98(0xdc)][_0x364c98(0xb3)]({'role':_0xdf924a,'content':_0x5d69e7,'timestamp':Date[_0x364c98(0xb8)]()}),_0x5eb9aa['updatedAt']=new Date()[_0x364c98(0xcf)](),_0x2715bf['tbPzP'](_0xdf924a,_0x2715bf['ZpTZe'])&&_0x2715bf[_0x364c98(0xa6)](_0x5eb9aa[_0x364c98(0xca)],_0x2715bf[_0x364c98(0xcb)])&&_0x5eb9aa[_0x364c98(0xdc)][_0x364c98(0xb6)]===0x1&&(_0x5eb9aa[_0x364c98(0xca)]=_0x2715bf[_0x364c98(0xc0)](_0x5d69e7[_0x364c98(0xdf)]('\x20')[_0x364c98(0xbb)](0x0,0x4)[_0x364c98(0xd0)]('\x20'),_0x364c98(0xdb))));}[_0x3e0ab4(0xa7)](){const _0xc338bf=_0x3e0ab4;return[...this['conversations']][_0xc338bf(0xb5)]((_0x378689,_0xdadc5b)=>_0xdadc5b[_0xc338bf(0xb7)][_0xc338bf(0xdd)](_0x378689[_0xc338bf(0xb7)]));}['switchConversation'](_0x1c0b77){const _0x489cc6=_0x3e0ab4;if(this['conversations'][_0x489cc6(0xbd)](_0x4ba804=>_0x4ba804['id']===_0x1c0b77))return this[_0x489cc6(0xd2)]=_0x1c0b77,!![];return![];}[_0x3e0ab4(0xb2)](_0x26a94a){const _0x4a0dba=_0x3e0ab4,_0x3b1fad={'DWsJY':function(_0x4b661e,_0x233725){return _0x4b661e===_0x233725;},'tbAuj':function(_0x4cb61b,_0x38df48){return _0x4cb61b>_0x38df48;}};this[_0x4a0dba(0xb9)]=this[_0x4a0dba(0xb9)]['filter'](_0x125407=>_0x125407['id']!==_0x26a94a),_0x3b1fad[_0x4a0dba(0xae)](this[_0x4a0dba(0xd2)],_0x26a94a)&&(this[_0x4a0dba(0xd2)]=_0x3b1fad['tbAuj'](this['conversations'][_0x4a0dba(0xb6)],0x0)?this[_0x4a0dba(0xb9)][0x0]['id']:null);}[_0x3e0ab4(0xd1)](){const _0x3024a9=_0x3e0ab4,_0xd6490f={'ghQRo':_0x3024a9(0xb9),'FKQEh':function(_0x1acc6d,_0x2b0f2b){return _0x1acc6d>_0x2b0f2b;}};try{const _0x22c270=JSON[_0x3024a9(0xd6)](localStorage[_0x3024a9(0xc3)](_0xd6490f[_0x3024a9(0xc7)]))||[];this[_0x3024a9(0xb9)]=_0x22c270[_0x3024a9(0xac)](_0x31b35e=>new Conversation(_0x31b35e['id'],_0x31b35e['title'])),_0xd6490f[_0x3024a9(0xcc)](this[_0x3024a9(0xb9)][_0x3024a9(0xb6)],0x0)&&(this[_0x3024a9(0xd2)]=this[_0x3024a9(0xb9)][0x0]['id']);}catch(_0x358f5d){console[_0x3024a9(0xd5)](_0x3024a9(0xc2),_0x358f5d),this['conversations']=[];}}['saveConversations'](){const _0x471ed1=_0x3e0ab4,_0x13de96={'WQsTc':'conversations','egYPM':_0x471ed1(0xce)};try{localStorage[_0x471ed1(0xd8)](_0x13de96[_0x471ed1(0xb0)],JSON['stringify'](this[_0x471ed1(0xb9)]));}catch(_0x3a5cb5){console['error'](_0x13de96[_0x471ed1(0xc9)],_0x3a5cb5);}}}export{qAConversationManager};