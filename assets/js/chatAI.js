
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x347d2a=_0x3b05;(function(_0x2b5e21,_0x1feeab){const _0x4eeeb2=_0x3b05,_0x52a87b=_0x2b5e21();while(!![]){try{const _0x3f0c5d=-parseInt(_0x4eeeb2(0x10d))/0x1+-parseInt(_0x4eeeb2(0x114))/0x2+parseInt(_0x4eeeb2(0x111))/0x3+-parseInt(_0x4eeeb2(0x11d))/0x4+-parseInt(_0x4eeeb2(0xe4))/0x5+parseInt(_0x4eeeb2(0x10f))/0x6*(-parseInt(_0x4eeeb2(0x123))/0x7)+parseInt(_0x4eeeb2(0x107))/0x8;if(_0x3f0c5d===_0x1feeab)break;else _0x52a87b['push'](_0x52a87b['shift']());}catch(_0x322431){_0x52a87b['push'](_0x52a87b['shift']());}}}(_0x569e,0xa658f));import _0x16f6ad from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x347d2a(0x11b),'apiToken':_0x347d2a(0x122),'modelName':'openai/Qwen2.5','maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x347d2a(0x125)};let settings={...defaultSettings};function loadSettings(){const _0x5451b4=_0x347d2a,_0x102ce7={'ErSOU':_0x5451b4(0xf0),'xGmjG':_0x5451b4(0xee),'SbUGE':_0x5451b4(0x108),'FwAMu':_0x5451b4(0xf3),'YtIbR':'temperature','DftXr':_0x5451b4(0x11f),'swaVf':_0x5451b4(0x10e)};settings[_0x5451b4(0xf0)]=_0x16f6ad[_0x5451b4(0xe7)](_0x102ce7['ErSOU'])||defaultSettings[_0x5451b4(0xf0)],settings[_0x5451b4(0xee)]=_0x16f6ad[_0x5451b4(0xe7)](_0x102ce7['xGmjG'])||defaultSettings['apiToken'],settings[_0x5451b4(0x108)]=_0x16f6ad['getItem'](_0x102ce7[_0x5451b4(0xff)])||defaultSettings[_0x5451b4(0x108)],settings[_0x5451b4(0xf3)]=_0x16f6ad[_0x5451b4(0xe7)](_0x102ce7['FwAMu'])||defaultSettings[_0x5451b4(0xf3)],settings[_0x5451b4(0x113)]=_0x16f6ad['getItem'](_0x102ce7[_0x5451b4(0x119)])||defaultSettings[_0x5451b4(0x113)],settings[_0x5451b4(0x11f)]=_0x16f6ad['getItem'](_0x102ce7[_0x5451b4(0x120)])||defaultSettings[_0x5451b4(0x11f)],settings['systemPrompt']=_0x16f6ad[_0x5451b4(0xe7)](_0x102ce7[_0x5451b4(0xed)])||defaultSettings[_0x5451b4(0x10e)],document[_0x5451b4(0x11e)](_0x102ce7[_0x5451b4(0x106)])['value']=settings[_0x5451b4(0xf0)],document[_0x5451b4(0x11e)](_0x102ce7['xGmjG'])[_0x5451b4(0xfb)]=settings[_0x5451b4(0xee)],document[_0x5451b4(0x11e)](_0x5451b4(0x108))['value']=settings[_0x5451b4(0x108)],document[_0x5451b4(0x11e)](_0x5451b4(0xf3))['value']=settings[_0x5451b4(0xf3)],document[_0x5451b4(0x11e)](_0x102ce7[_0x5451b4(0x119)])[_0x5451b4(0xfb)]=settings['temperature'],document['getElementById'](_0x102ce7[_0x5451b4(0x120)])[_0x5451b4(0xfb)]=settings[_0x5451b4(0x11f)],document['getElementById'](_0x5451b4(0x10e))[_0x5451b4(0xfb)]=settings[_0x5451b4(0x10e)];}function saveSettings(){const _0x347bd0=_0x347d2a,_0x482e96={'MbAmo':'9|6|0|10|12|14|4|5|13|2|3|8|7|1|11','RtSkR':_0x347bd0(0x108),'QLVqp':'systemPrompt','WAxtL':_0x347bd0(0xf3),'gIlPT':_0x347bd0(0xf0),'fhxyo':_0x347bd0(0xee),'vferl':function(_0x1154bf){return _0x1154bf();},'WMZkH':_0x347bd0(0x11f)},_0x480888=_0x482e96[_0x347bd0(0xef)][_0x347bd0(0xe9)]('|');let _0x4e6e29=0x0;while(!![]){switch(_0x480888[_0x4e6e29++]){case'0':settings[_0x347bd0(0x108)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0x11a)])[_0x347bd0(0xfb)];continue;case'1':_0x16f6ad[_0x347bd0(0xf4)](_0x482e96[_0x347bd0(0xf5)],settings[_0x347bd0(0x10e)]);continue;case'2':_0x16f6ad[_0x347bd0(0xf4)]('modelName',settings[_0x347bd0(0x108)]);continue;case'3':_0x16f6ad[_0x347bd0(0xf4)](_0x482e96[_0x347bd0(0x116)],settings[_0x347bd0(0xf3)]);continue;case'4':settings[_0x347bd0(0x10e)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0xf5)])[_0x347bd0(0xfb)];continue;case'5':_0x16f6ad[_0x347bd0(0xf4)](_0x482e96[_0x347bd0(0x101)],settings[_0x347bd0(0xf0)]);continue;case'6':settings[_0x347bd0(0xee)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0xe2)])[_0x347bd0(0xfb)];continue;case'7':_0x16f6ad[_0x347bd0(0xf4)](_0x347bd0(0x11f),settings[_0x347bd0(0x11f)]);continue;case'8':_0x16f6ad[_0x347bd0(0xf4)](_0x347bd0(0x113),settings[_0x347bd0(0x113)]);continue;case'9':settings[_0x347bd0(0xf0)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0x101)])[_0x347bd0(0xfb)];continue;case'10':settings[_0x347bd0(0xf3)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0x116)])['value'];continue;case'11':_0x482e96[_0x347bd0(0x10c)](toggleSettings);continue;case'12':settings[_0x347bd0(0x113)]=document[_0x347bd0(0x11e)](_0x347bd0(0x113))['value'];continue;case'13':_0x16f6ad['setItem'](_0x482e96['fhxyo'],settings[_0x347bd0(0xee)]);continue;case'14':settings[_0x347bd0(0x11f)]=document[_0x347bd0(0x11e)](_0x482e96[_0x347bd0(0x127)])[_0x347bd0(0xfb)];continue;}break;}}function toggleSettings(){const _0x14a064=_0x347d2a,_0x2b658e={'bfUbQ':_0x14a064(0x115),'WvFDS':'flex','ryPAm':_0x14a064(0xe5)},_0x2760e6=document[_0x14a064(0x11e)](_0x2b658e[_0x14a064(0xe0)]);_0x2760e6[_0x14a064(0x10a)][_0x14a064(0x110)]=_0x2760e6[_0x14a064(0x10a)][_0x14a064(0x110)]===_0x2b658e[_0x14a064(0x11c)]?_0x2b658e['ryPAm']:_0x2b658e[_0x14a064(0x11c)];}window[_0x347d2a(0xdd)]=toggleSettings,window['sendMessage']=sendMessage;async function sendMessage(){const _0x56f5d5=_0x347d2a,_0x50e638={'zqkWU':'user-input','YKIdZ':_0x56f5d5(0xf9),'baHUW':_0x56f5d5(0xf2),'UQYAV':function(_0x1eca52,_0x342900,_0x15a83f){return _0x1eca52(_0x342900,_0x15a83f);},'QTlta':function(_0x547746,_0x4db190,_0x1d49c2){return _0x547746(_0x4db190,_0x1d49c2);},'AlRaf':_0x56f5d5(0xe6),'QznSs':'system','iIMxj':function(_0x30bb29,_0x35b9b2){return _0x30bb29(_0x35b9b2);},'VgLEI':function(_0x564e69,_0x391fd7){return _0x564e69(_0x391fd7);},'ZHCtx':'json_object','caGdT':function(_0x2957a5){return _0x2957a5();},'ZkoZs':function(_0x208bdd,_0x3a3212){return _0x208bdd>_0x3a3212;},'CmwYK':function(_0x4dde0e,_0x59175d,_0x3f00e0,_0x5f18b5){return _0x4dde0e(_0x59175d,_0x3f00e0,_0x5f18b5);},'EfpxA':_0x56f5d5(0x102),'FoBGY':function(_0x36db05,_0x18b598,_0x31aceb,_0x46c64d){return _0x36db05(_0x18b598,_0x31aceb,_0x46c64d);},'SHajD':function(_0x2082d5,_0x55263f){return _0x2082d5+_0x55263f;},'KeOSA':_0x56f5d5(0xe8),'yksDV':function(_0x144363){return _0x144363();}},_0x432e25=document[_0x56f5d5(0x11e)](_0x50e638[_0x56f5d5(0x100)])[_0x56f5d5(0xfb)];if(!_0x432e25)return;appendMessage(document[_0x56f5d5(0x11e)](_0x50e638[_0x56f5d5(0xe1)]),_0x432e25,_0x50e638[_0x56f5d5(0x112)]),document[_0x56f5d5(0x11e)](_0x50e638[_0x56f5d5(0x100)])[_0x56f5d5(0xfb)]='',_0x50e638[_0x56f5d5(0x104)](showTypingIndicator,document['getElementById'](_0x50e638[_0x56f5d5(0xe1)]),_0x56f5d5(0xf6));try{const _0xdbb219=await _0x50e638[_0x56f5d5(0xfd)](fetch,settings[_0x56f5d5(0xf0)]+_0x56f5d5(0x124),{'method':_0x50e638[_0x56f5d5(0xf8)],'headers':{'Authorization':_0x56f5d5(0x105)+settings[_0x56f5d5(0xee)],'Content-Type':_0x56f5d5(0xea)},'body':JSON[_0x56f5d5(0xeb)]({'model':settings[_0x56f5d5(0x108)],'messages':[{'role':_0x50e638[_0x56f5d5(0xfe)],'content':settings[_0x56f5d5(0x10e)]},{'role':_0x50e638[_0x56f5d5(0x112)],'content':_0x432e25}],'max_tokens':_0x50e638[_0x56f5d5(0xfc)](parseInt,settings[_0x56f5d5(0xf3)]),'temperature':parseFloat(settings[_0x56f5d5(0x113)]),'top_p':_0x50e638['VgLEI'](parseFloat,settings[_0x56f5d5(0x11f)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x50e638['ZHCtx']}})}),_0x257849=await _0xdbb219[_0x56f5d5(0xe3)]();_0x50e638[_0x56f5d5(0x126)](hideTypingIndicator);if(_0x257849['choices']&&_0x50e638[_0x56f5d5(0x121)](_0x257849[_0x56f5d5(0xec)]['length'],0x0)){const _0x45c9be=_0x257849[_0x56f5d5(0xec)][0x0][_0x56f5d5(0x118)][_0x56f5d5(0xde)];appendMessage(document[_0x56f5d5(0x11e)](_0x50e638[_0x56f5d5(0xe1)]),_0x45c9be,'ai');let _0x12694a;try{_0x12694a=JSON[_0x56f5d5(0x109)](_0x45c9be),appendQuiz(_0x12694a);}catch(_0x281f1a){_0x50e638[_0x56f5d5(0x10b)](appendMessage,document[_0x56f5d5(0x11e)](_0x50e638['YKIdZ']),_0x50e638['EfpxA'],'ai');}}}catch(_0x40429e){_0x50e638[_0x56f5d5(0xdf)](appendMessage,document[_0x56f5d5(0x11e)](_0x50e638[_0x56f5d5(0xe1)]),_0x50e638[_0x56f5d5(0xf1)](_0x50e638[_0x56f5d5(0x117)],_0x40429e[_0x56f5d5(0x118)]),'ai');}finally{_0x50e638[_0x56f5d5(0x103)](hideTypingIndicator);}}function speakMessage(_0x3e8580){const _0x992bf0=_0x347d2a,_0xb8c7c1=new SpeechSynthesisUtterance(_0x3e8580);_0xb8c7c1['lang']='en-US',window[_0x992bf0(0xf7)][_0x992bf0(0xfa)](_0xb8c7c1);}function _0x569e(){const _0x3e19f5=['KeOSA','message','YtIbR','RtSkR','http://localhost:1234/v1','WvFDS','5191536jqyBPs','getElementById','topP','DftXr','ZkoZs','sk-proj-66666666666666666666666666666666','1393xiXlaA','/chat/completions','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','caGdT','WMZkH','toggleSettings','content','FoBGY','bfUbQ','YKIdZ','fhxyo','json','1465970DpsnbB','none','POST','getItem','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','split','application/json','stringify','choices','swaVf','apiToken','MbAmo','apiUrl','SHajD','user','maxTokens','setItem','QLVqp','AI\x20is\x20typing...','speechSynthesis','AlRaf','chat-window','speak','value','iIMxj','QTlta','QznSs','SbUGE','zqkWU','gIlPT','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','yksDV','UQYAV','Bearer\x20','ErSOU','32233280TOQOSt','modelName','parse','style','CmwYK','vferl','231036CaGiWC','systemPrompt','37722HYAjQk','display','763203hjkMCK','baHUW','temperature','1057950nGhUQf','settings','WAxtL'];_0x569e=function(){return _0x3e19f5;};return _0x569e();}function _0x3b05(_0x3fae74,_0x4e0146){const _0x569eac=_0x569e();return _0x3b05=function(_0x3b050a,_0x7517f4){_0x3b050a=_0x3b050a-0xdd;let _0x57015e=_0x569eac[_0x3b050a];return _0x57015e;},_0x3b05(_0x3fae74,_0x4e0146);}window['onload']=loadSettings;