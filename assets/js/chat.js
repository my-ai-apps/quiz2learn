
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x5eb117=_0x44d8;(function(_0x19b94c,_0x21acbd){const _0x41b3f2=_0x44d8,_0x16c1bf=_0x19b94c();while(!![]){try{const _0x52c18b=-parseInt(_0x41b3f2(0x16c))/0x1+-parseInt(_0x41b3f2(0x141))/0x2*(parseInt(_0x41b3f2(0x150))/0x3)+parseInt(_0x41b3f2(0x13d))/0x4+-parseInt(_0x41b3f2(0x188))/0x5+-parseInt(_0x41b3f2(0x144))/0x6*(parseInt(_0x41b3f2(0x14e))/0x7)+parseInt(_0x41b3f2(0x17b))/0x8+parseInt(_0x41b3f2(0x164))/0x9;if(_0x52c18b===_0x21acbd)break;else _0x16c1bf['push'](_0x16c1bf['shift']());}catch(_0x49e10c){_0x16c1bf['push'](_0x16c1bf['shift']());}}}(_0x12b1,0xaf3da));import{BaseConversationManager}from'./BaseConversationManager.js';import{Logger}from'./common.js';import{aiLanguageSession,initializeLanguageSession,sessionConfig}from'./aiCommon.js';const welcomeScreen=document['getElementById'](_0x5eb117(0x174)),chatContainer=document['getElementById'](_0x5eb117(0x180)),messagesContainer=document[_0x5eb117(0x14f)](_0x5eb117(0x16b)),messageInput=document[_0x5eb117(0x14f)](_0x5eb117(0x142)),sendButton=document['getElementById'](_0x5eb117(0x184)),micButton=document[_0x5eb117(0x14f)]('micButton'),errorMessage=document[_0x5eb117(0x14f)](_0x5eb117(0x16d)),loader=document[_0x5eb117(0x14f)]('loader'),example1=document['getElementById']('example1'),example2=document['getElementById'](_0x5eb117(0x18e)),newChatButton=document[_0x5eb117(0x14f)](_0x5eb117(0x13c)),settingsButton=document[_0x5eb117(0x14f)](_0x5eb117(0x173)),inputContainer=document[_0x5eb117(0x147)](_0x5eb117(0x148)),conversationManager=new BaseConversationManager();function _0x44d8(_0x541c90,_0x3d6e66){const _0x12b10b=_0x12b1();return _0x44d8=function(_0x44d8db,_0x3f94d4){_0x44d8db=_0x44d8db-0x13c;let _0x503d1d=_0x12b10b[_0x44d8db];return _0x503d1d;},_0x44d8(_0x541c90,_0x3d6e66);}function toggleChatUI(){const _0x18fe2c=_0x5eb117,_0x20eca8={'SqqLq':_0x18fe2c(0x189),'JBoGr':'flex'};if(welcomeScreen)welcomeScreen['style'][_0x18fe2c(0x14a)]=_0x20eca8['SqqLq'];if(chatContainer)chatContainer[_0x18fe2c(0x155)]['display']=_0x20eca8[_0x18fe2c(0x13f)];if(inputContainer)inputContainer[_0x18fe2c(0x155)][_0x18fe2c(0x14a)]=_0x20eca8[_0x18fe2c(0x13f)];if(messageInput)messageInput[_0x18fe2c(0x14c)]();}function updateMessagesUI(_0x1c4bbe){const _0x6d8620=_0x5eb117,_0x1c6723={'RubxW':_0x6d8620(0x166),'WOxJp':_0x6d8620(0x169),'ySQwB':function(_0x6f34ba,_0x5c33db){return _0x6f34ba===_0x5c33db;},'GuczJ':'user','gKwxt':'message-user','eElJc':_0x6d8620(0x187)};if(!messagesContainer)return;messagesContainer['innerHTML']='',_0x1c4bbe[_0x6d8620(0x17a)](_0x6e14ab=>{const _0xa9ed1e=_0x6d8620,_0x1615f9=document[_0xa9ed1e(0x17e)](_0x1c6723[_0xa9ed1e(0x18b)]);_0x1615f9[_0xa9ed1e(0x17c)]['add'](_0x1c6723[_0xa9ed1e(0x185)],_0x1c6723[_0xa9ed1e(0x160)](_0x6e14ab[_0xa9ed1e(0x181)],_0x1c6723[_0xa9ed1e(0x18a)])?_0x1c6723[_0xa9ed1e(0x149)]:_0x1c6723['eElJc']),_0x1615f9[_0xa9ed1e(0x16a)]=_0x1c6723['ySQwB'](_0x6e14ab[_0xa9ed1e(0x181)],_0x1c6723[_0xa9ed1e(0x18a)])?_0xa9ed1e(0x154)+_0x6e14ab[_0xa9ed1e(0x165)]+_0xa9ed1e(0x161):_0xa9ed1e(0x168)+_0x6e14ab['content']+_0xa9ed1e(0x161),messagesContainer[_0xa9ed1e(0x143)](_0x1615f9);}),messagesContainer[_0x6d8620(0x15e)]=messagesContainer[_0x6d8620(0x18d)];}async function sendMessage(){const _0x4c100e=_0x5eb117,_0x87aa4={'CyLzk':function(_0x23f127){return _0x23f127();},'GKXtB':_0x4c100e(0x158),'cEmhS':function(_0x3c300b,_0x3058b7){return _0x3c300b(_0x3058b7);},'oFPrX':_0x4c100e(0x162),'eDjiE':_0x4c100e(0x166),'IAsMY':_0x4c100e(0x169),'XTxlS':_0x4c100e(0x187),'MZWFR':_0x4c100e(0x152),'QlAVg':_0x4c100e(0x15a)},_0x548e3a=messageInput[_0x4c100e(0x15c)][_0x4c100e(0x140)]();if(!_0x548e3a)return;_0x87aa4[_0x4c100e(0x17d)](toggleChatUI),await conversationManager['addMessage'](_0x548e3a,_0x87aa4['GKXtB']);const _0x317979=await conversationManager[_0x4c100e(0x16f)]();_0x87aa4[_0x4c100e(0x15d)](updateMessagesUI,_0x317979['messages']),messageInput['value']='',messageInput[_0x4c100e(0x155)]['height']=_0x87aa4[_0x4c100e(0x182)];try{if(!aiLanguageSession)await initializeLanguageSession();const _0x503f85=[{'role':_0x4c100e(0x18c),'content':sessionConfig[_0x4c100e(0x172)]},..._0x317979[_0x4c100e(0x171)]],_0x556df5=await aiLanguageSession['promptStreaming'](JSON[_0x4c100e(0x167)](_0x503f85));let _0x52dea1='';const _0x2f2c4b=document[_0x4c100e(0x17e)](_0x87aa4['eDjiE']);_0x2f2c4b[_0x4c100e(0x17c)][_0x4c100e(0x175)](_0x87aa4[_0x4c100e(0x183)],_0x87aa4['XTxlS']),_0x2f2c4b[_0x4c100e(0x16a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',messagesContainer[_0x4c100e(0x143)](_0x2f2c4b);const _0x218e53=_0x2f2c4b[_0x4c100e(0x147)](_0x4c100e(0x146));for await(const _0x59e066 of _0x556df5){_0x52dea1+=_0x59e066,_0x218e53[_0x4c100e(0x15f)]=_0x52dea1,messagesContainer[_0x4c100e(0x15e)]=messagesContainer[_0x4c100e(0x18d)];}await conversationManager[_0x4c100e(0x170)](_0x52dea1,_0x87aa4['MZWFR']);}catch(_0x2852db){Logger[_0x4c100e(0x177)](_0x4c100e(0x157),_0x2852db);const _0x14568b=_0x87aa4[_0x4c100e(0x15b)];await conversationManager[_0x4c100e(0x170)](_0x14568b,_0x87aa4[_0x4c100e(0x151)]),_0x87aa4[_0x4c100e(0x15d)](updateMessagesUI,conversationManager[_0x4c100e(0x16f)]()[_0x4c100e(0x171)]);}}document[_0x5eb117(0x153)]('DOMContentLoaded',async()=>{const _0x40ba94=_0x5eb117,_0x275bf1={'YzDfo':function(_0x190ed2){return _0x190ed2();},'MrISK':_0x40ba94(0x159)};try{if(!aiLanguageSession)await _0x275bf1[_0x40ba94(0x145)](initializeLanguageSession);!conversationManager['getCurrentConversation']()&&conversationManager[_0x40ba94(0x14d)]();}catch(_0x41efca){Logger[_0x40ba94(0x177)](_0x275bf1['MrISK'],_0x41efca);}});if(sendButton)sendButton[_0x5eb117(0x153)](_0x5eb117(0x179),sendMessage);messageInput&&(messageInput['addEventListener'](_0x5eb117(0x17f),_0x2f4831=>{const _0x4d7e7b=_0x5eb117,_0x4a11eb={'VvDCN':function(_0x5438db,_0x4f374e){return _0x5438db===_0x4f374e;},'XPsJE':'Enter','YQFrr':function(_0x5e55d8){return _0x5e55d8();}};_0x4a11eb[_0x4d7e7b(0x13e)](_0x2f4831[_0x4d7e7b(0x156)],_0x4a11eb['XPsJE'])&&!_0x2f4831[_0x4d7e7b(0x163)]&&(_0x2f4831['preventDefault'](),_0x4a11eb[_0x4d7e7b(0x176)](sendMessage));}),messageInput['addEventListener'](_0x5eb117(0x14c),toggleChatUI));function _0x12b1(){const _0x5a35f7=['CyLzk','createElement','keydown','chatContainer','role','oFPrX','IAsMY','sendButton','WOxJp','href','message-ai','6561120YGyUQG','none','GuczJ','RubxW','system','scrollHeight','example2','newChatButton','3197304DtKIlK','VvDCN','JBoGr','trim','74PgpOts','messageInput','appendChild','453714UGGlYa','YzDfo','.message-content','querySelector','.input-container','gKwxt','display','flex','focus','createNewConversation','77NHCKnS','getElementById','68214tidofs','MZWFR','assistant','addEventListener','<div\x20class=\x22message-content\x22>','style','key','Response\x20error:','user','Initialization\x20failed','I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','QlAVg','value','cEmhS','scrollTop','textContent','ySQwB','</div>','auto','shiftKey','15326586qPFydD','content','div','stringify','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','message','innerHTML','messagesContainer','206144bIaXra','errorMessage','settings.html','getCurrentConversation','addMessage','messages','systemRole','settingsButton','welcomeScreen','add','YQFrr','error','location','click','forEach','11255912xEYhGj','classList'];_0x12b1=function(){return _0x5a35f7;};return _0x12b1();}newChatButton&&newChatButton[_0x5eb117(0x153)](_0x5eb117(0x179),()=>{const _0xe90281=_0x5eb117,_0x21f63f={'zBShX':_0xe90281(0x14b),'VirIo':_0xe90281(0x189)};conversationManager['createNewConversation']();if(messagesContainer)messagesContainer[_0xe90281(0x16a)]='';if(welcomeScreen)welcomeScreen[_0xe90281(0x155)]['display']=_0x21f63f['zBShX'];if(chatContainer)chatContainer['style'][_0xe90281(0x14a)]=_0x21f63f['VirIo'];if(messageInput)messageInput[_0xe90281(0x15c)]='';});settingsButton&&settingsButton[_0x5eb117(0x153)](_0x5eb117(0x179),()=>{const _0x3d190e=_0x5eb117,_0xd4e9f5={'IdKTa':_0x3d190e(0x16e)};window[_0x3d190e(0x178)][_0x3d190e(0x186)]=_0xd4e9f5['IdKTa'];});export{conversationManager,sendMessage};