<!--
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
-->
<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Quiz Deck Creator</title><style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;background-color:#f3f4f6;padding:20px}.container{max-width:600px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.headerNewDeck{background:#6b21a8;color:#fff;padding:20px;border-radius:8px 8px 0 0;display:flex;align-items:center;gap:12px}.back-button{background:0 0;border:none;color:#fff;cursor:pointer;padding:0;width:24px;height:24px;line-height:24px}.header h1{font-size:24px;font-weight:400}.content{padding:20px}.step{display:none}.step.active{display:block}.form-group{margin-bottom:16px}label{display:block;margin-bottom:8px;color:#374151;font-weight:500}input,select{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:4px;font-size:16px;margin-bottom:12px}button{background:#6b21a8;color:#fff;border:none;padding:16px;border-radius:4px;width:100%;font-size:16px;cursor:pointer;margin-bottom:8px}button:hover{background:#581c87}.question-count{margin-top:16px;color:#6b21a8;font-size:14px}.success-message{background:#dcfce7;color:#166534;padding:12px;border-radius:4px;margin-top:16px;display:none}.option-container{transition:all .3s ease}.input-group{position:relative;display:flex;align-items:center;margin-bottom:10px}.input-group button{width:35px}.mic-button{background:0 0;border:none;cursor:pointer;padding:5px;margin-left:5px}.mic-button i{color:#666;font-size:1.2em}.mic-button.recording i{color:red}.speech-feedback{font-size:.8em;color:#666;margin-left:10px}</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"><link rel="stylesheet" href="./assets/css/common.css"></head><body><header class="header"><div class="header-left"><i class="fas fa-bars"></i><div class="logo">QuizMe</div></div><div class="search-bar"><input placeholder="Search for quiz decks"></div><div class="header-right"><a href="AddNewDeck.html" title="Add New Deck"><i class="fas fa-plus"></i></a><div class="user-avatar" alt="Google logo">J</div></div></header><div class="container"><div class="headerNewDeck"><button id="backBtn" class="back-button" style="display:none">←</button><h1 id="headerTitle">Create New Deck</h1></div><div class="content"><div id="step1" class="step active"><div class="form-group"><label for="deckTitle">What is the title of your deck?</label> <input id="deckTitle" required></div><div class="form-group"><label for="gradeLevel">Select Grade Level</label> <select id="gradeLevel" required><option value="">Select a grade</option><option value="grade1">Grade 1</option><option value="grade2">Grade 2</option><option value="grade3">Grade 3</option><option value="grade4">Grade 4</option><option value="grade5">Grade 5</option><option value="grade6">Grade 6</option><option value="grade7">Grade 7</option><option value="grade8">Grade 8</option><option value="grade9">Grade 9</option><option value="grade10">Grade 10</option></select></div><div class="form-group"><label for="timeLimit">Time limit per question (in seconds)</label> <input type="number" id="timeLimit" min="1" value="30" required></div><div class="form-group"><label for="questionType">Question Type</label> <select id="questionType" required><option value="multiple-choice">Multiple Choice</option><option value="term-definition">Term/Definition</option></select></div><button onclick="createDeck()">Create New Deck</button></div><div id="step2" class="step"><div class="form-group"><label for="question" id="questionLabel">Question</label><div class="input-group"><input id="question" placeholder="Enter your question" required><span class="speech-feedback" id="questionFeedback"></span> <button type="button" class="mic-button" id="questionMic" title="Click to speak"><i class="fas fa-microphone"></i></button></div></div><div class="form-group" id="optionsContainer"><label id="optionsLabel">Options</label><div class="form-group"><label for="option1">Option 1:</label><div class="input-group"><input id="option1" placeholder="Option 1" required><span class="speech-feedback" id="option1Feedback"></span> <button type="button" class="mic-button" id="option1Mic" title="Click to speak"><i class="fas fa-microphone"></i></button></div></div><div class="form-group"><label for="option2">Option 2:</label><div class="input-group"><input id="option2" placeholder="Option 2" required> <span class="speech-feedback" id="option2Feedback"></span> <button type="button" class="mic-button" id="option2Mic" title="Click to speak"><i class="fas fa-microphone"></i></button></div></div><div class="form-group"><label for="option3">Option 3:</label><div class="input-group"><input id="option3" placeholder="Option 3" required><span class="speech-feedback" id="option3Feedback"></span> <button type="button" class="mic-button" id="option3Mic" title="Click to speak"><i class="fas fa-microphone"></i></button></div></div></div><div class="form-group"><label for="correctAnswer">Correct Answer</label> <select id="correctAnswer" required><option value="">Select correct answer</option></select></div><button onclick="addQuestion()">Add Question</button> <button onclick="saveDeck()" id="saveDeckBtn" style="background:#15803d">Save Deck</button><div id="questionCount" class="question-count"></div><div id="successMessage" class="success-message">Deck saved successfully!</div></div></div></div><script>let currentDeck={topic:"",gradeLevel:"",timeLimit:30,questionType:"multiple-choice",questions:[]};function showStep(e){document.querySelectorAll(".step").forEach((e=>e.classList.remove("active"))),document.getElementById(`step${e}`).classList.add("active");document.getElementById("backBtn").style.display=1===e?"none":"block",document.getElementById("headerTitle").textContent=1===e?"Create New Deck":"Add New Question"}function updateUIForQuestionType(){const e=document.getElementById("questionType").value,t=(document.getElementById("optionsContainer"),document.getElementById("questionLabel")),n=document.getElementById("optionsLabel");"term-definition"===e?(t.textContent="Term",n.textContent="Definition",document.getElementById("option1").placeholder="Definition",document.getElementById("option2").style.display="none",document.getElementById("option3").style.display="none"):(t.textContent="Question",n.textContent="Options",document.getElementById("option1").placeholder="Option 1",document.getElementById("option2").style.display="block",document.getElementById("option3").style.display="block")}function createDeck(){const e=document.getElementById("deckTitle").value.trim(),t=document.getElementById("gradeLevel").value,n=parseInt(document.getElementById("timeLimit").value),o=document.getElementById("questionType").value;e&&t&&n&&!(n<1)?(currentDeck.topic=e,currentDeck.gradeLevel=t,currentDeck.timeLimit=n,currentDeck.questionType=o,showStep(2),updateUIForQuestionType(),updateQuestionCount()):alert("Please fill in all fields correctly")}function updateCorrectAnswerDropdown(){const e=document.getElementById("correctAnswer");e.innerHTML='<option value="">Select correct answer</option>';const t="term-definition"===currentDeck.questionType?1:3;for(let n=1;n<=t;n++){const t=document.getElementById(`option${n}`).value.trim();if(t){const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}}}function addQuestion(){const e=document.getElementById("question").value.trim();let t=[];if("term-definition"===currentDeck.questionType){t=[document.getElementById("option1").value.trim()]}else t=[document.getElementById("option1").value.trim(),document.getElementById("option2").value.trim(),document.getElementById("option3").value.trim()];const n=document.getElementById("correctAnswer").value;e&&!t.some((e=>!e))&&n?(currentDeck.questions.push({question:e,options:t,correctAnswer:n}),document.getElementById("question").value="",t.forEach(((e,t)=>{const n=document.getElementById(`option${t+1}`);n&&(n.value="")})),document.getElementById("correctAnswer").value="",updateQuestionCount(),document.getElementById("saveDeckBtn").style.display="block"):alert("Please fill in all fields")}function updateQuestionCount(){const e=currentDeck.questions.length;document.getElementById("questionCount").textContent=`Questions added: ${e}`,document.getElementById("saveDeckBtn").style.display=e>0?"block":"none"}async function saveDeck(){if(0!==currentDeck.questions.length)try{const e=currentDeck.topic.replace(/[^a-zA-Z0-9]/g,""),t=`${currentDeck.gradeLevel}-${e}.js`,n={id:`${currentDeck.gradeLevel}-${e}`,title:currentDeck.topic,timeLimit:currentDeck.timeLimit,topic:currentDeck.topic,questions:currentDeck.questions};if(!(await fetch("/api/save-deck",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t,content:`export default ${JSON.stringify(n,null,2)}`})})).ok)throw new Error("Failed to save deck");if(!(await fetch("/api/update-manifest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t})})).ok)throw new Error("Failed to update manifest");const o=document.getElementById("successMessage");o.style.display="block",setTimeout((()=>{o.style.display="none",window.location.href="index.html"}),2e3)}catch(e){console.error("Error saving deck:",e),alert("Failed to save deck. Please try again.")}else alert("Add at least one question before saving")}document.getElementById("backBtn").addEventListener("click",(()=>showStep(1))),document.getElementById("questionType").addEventListener("change",updateUIForQuestionType);for(let e=1;e<=3;e++)document.getElementById(`option${e}`).addEventListener("input",updateCorrectAnswerDropdown)</script><script src="./assets/js/store.js" type="module"></script><script src="./assets/js/QuizStateManager.js" type="module"></script><script src="./assets/js/flashcards.js" type="module"></script><script src="./assets/js/speechRecognition.js" defer="defer"></script></body></html>